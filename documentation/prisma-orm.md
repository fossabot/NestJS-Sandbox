## Setup Prisma
The information provided under this topic is related to a fresh install. Regarding this project, the steps are already done and are only documented as a reference.  
You can also follow [this guide](https://www.prisma.io/blog/nestjs-prisma-rest-api-7D056s1BmOL0) if you are new to prisma and want to set it up on your own or in your own projects.  
  
To actually use Prisma in your project, you need to follow the steps outlined next:
First, install the prisma package ``` npm install -D prisma ```
After installing the package, you need to run ``` npx prisma init ``` to initialize Prisma inside of your project.  
Next, add your database url to your .env file.  
Then, open the schema.prisma file, located in the prisma folder in the app root-dir, and set the provider in the datasource block to match your database.  
Currently supported by the orm are: postgresql, mysql, sqlite, sqlserver, mongodb and cockroachdb  
The next step depends on your project:
- If you setup prisma in a blank project, simply run ``` npx prisma generate ``` to generate the actual prisma client and start working with the db.
- If you already have an existing database run ``` npx prisma db pull ``` first to generate your prisma schema out of your existing database schema. After that, run ```  npx prisma generate ``` to generate the client and continue.

Per schema only one datasource is allowed.  
If more than one database is needed in the project, this can be done by structuring the respective schema.prisma files in different folders but it is not a supported szenario for prisma.  
  
The prisma client is generated by the prisma cli using this command: ``` npx prisma generate ```.  
The command will evaluate the schema.prisma file and at first run, install the @prisma/client and prisma packages and afterwards create the actual prisma client.
In order to generate the basic prisma client, the application contains a really basic user-model. This is only serving as an initializer for the prisma client and can be removed, edited or renamed according to the applications needs.  
After creation, the client can be used like this:  
``` 
import { PrismaClient } from '@prisma/client'
const prisma = new PrismaClient()
```

## Working with Prisma  
### Models/Entities
If you are used to TypeORM or Sequelize, you might want to create your own model classes or entity objects combining database representation with custom logic to create concious models or only database representations, using simple models. In Prisma though, you define your table structure in the schema.prisma file and only there.  
Each table is represented in that specific file. Each time you add a new model or change an existing one, you need to run ``` npx prisma generate ``` to update the generated client with the new information. 
  
### Migrations
Prisma supports Typescriptfitting migrations out of the box. Other than one might expect, all operations done in a migration are written in raw SQL and are based on what is written down in the schema file. Other than TypeORM and Sequelize, migrations are executed uppon creation!

### Workflow
- create the data model in the schema.prisma file.
- create the migration and therefore apply the data model to the database
- generate the prisma client.

The step "generate the prisma client" can be automated with running npm run watch:prisma. This command will start a file watcher that regenerates the prisma client each time the file schema.prisma is changed. 